webpackJsonp([26],{IrRb:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={data:function(){var e=this;return{projecttypes:[],file1:[],file2:[],file3:[],file4:[],file5:[],form:{id:0,companyid:"",projectname:"",companytype:"",companytype_t:"",companytype_tt:"",industrytype:"",projecttype:"",nationfunds:"",provincefunds:"",cityfunds:"",districtfunds:"",responseperson:"",contractperson:"",telephone:"",phone:"",other:"",authenticatetime:"",validity:"",reportdate:"",certificatelabel:"",employedperson:"",lastyearincome:"",status:0},rules:{projectname:[{required:!0,message:"该项不能为空",trigger:"blur"}],companytype_t:[{required:!0,message:"该项不能为空",trigger:"change"}],companytype_tt:[{validator:function(t,r,l){if("其他"===e.form.companytype_t){if(!r)return l(new Error("请填写公司类型"));l()}else l()},trigger:"blur"}],certificatelabel:[{required:!0,message:"该项不能为空",trigger:"blur"}],employedperson:[{required:!0,message:"该项不能为空",trigger:"blur"},{type:"number",message:"该项为数字"}],industrytype:[{required:!0,message:"该项不能为空",trigger:"change"}],projecttype:[{required:!0,message:"该项不能为空",trigger:"change"}],lastyearincome:[{required:!0,message:"该项不能为空",trigger:"blur"},{type:"number",message:"该项为数字"}],nationfunds:[{required:!0,message:"该项不能为空",trigger:"blur"},{type:"number",message:"该项为数字"}],provincefunds:[{required:!0,message:"该项不能为空",trigger:"blur"},{type:"number",message:"该项为数字"}],cityfunds:[{required:!0,message:"该项不能为空",trigger:"blur"},{type:"number",message:"该项为数字"}],districtfunds:[{required:!0,message:"该项不能为空",trigger:"blur"},{type:"number",message:"该项为数字"}],responseperson:[{required:!0,message:"该项不能为空",trigger:"blur"}],contractperson:[{required:!0,message:"该项不能为空",trigger:"blur"}],telephone:[{required:!0,message:"该项不能为空",trigger:"blur"},{type:"number",message:"该项为数字"}],phone:[{required:!0,message:"该项不能为空",trigger:"blur"},{type:"number",message:"该项为数字"}],authenticatetime:[{required:!0,message:"该项不能为空",trigger:"change"}],validity:[{required:!0,message:"该项不能为空",trigger:"change"}]},fileList:[]}},created:function(){this.getdata()},methods:{onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(t){0!==e.file1.length?(e.form.opinion="",e.form.status=1,"其他"===e.form.companytype_t?(e.form.companytype=e.form.companytype_tt,e.$api.patch("api/Provinceassistancefunds",e.form,function(t){e.$router.push("/fatable"),e.$alert("提交成功","提示",{confirmButtonText:"确定",type:"success"})})):(e.form.companytype=e.form.companytype_t,e.$api.patch("api/Provinceassistancefunds",e.form,function(t){e.$router.push("/fatable"),e.$alert("提交成功","提示",{confirmButtonText:"确定",type:"success"})}))):e.$alert("文件未上传或未按规定格式上传","提示",{confirmButtonText:"确定",type:"error"})}else e.$alert("表单未全部填写完成","提示",{confirmButtonText:"确定",type:"error"})})},save:function(){var e=this;this.$api.patch("api/Provinceassistancefunds",this.form,function(t){e.form.id=t.id,e.$message.success("保存成功")})},getdata:function(){var e=this;this.form.companyid=localStorage.getItem("companyid"),this.form.reportdate=this.getdate(),this.$route.query.proid&&(this.$api.get("api/Provinceassistancefundsstorages?filter="+encodeURI('{"where":{"and":[{"provinceassistancefundsid":'+this.$route.query.proid+"}]}}"),null,function(t){if(0!==t.length)for(var r in t)switch(t[r].type){case"file1":e.file1=[{name:t[r].name.slice(14),url:t[r].url}];break;case"file2":e.file2=[{name:t[r].name.slice(14),url:t[r].url}];break;case"file3":e.file3=[{name:t[r].name.slice(14),url:t[r].url}];break;case"file4":e.file4=[{name:t[r].name.slice(14),url:t[r].url}];break;case"file5":e.file5=[{name:t[r].name.slice(14),url:t[r].url}];break;default:console.log("什么也不是")}}),this.$api.get("api/Provinceassistancefunds/"+this.$route.query.proid,null,function(t){e.form=t,t.opinion&&e.$notify({title:"修改信息",message:t.opinion,duration:0,type:"error",position:"top-left"})}))},getdate:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1,l=e.getDate();return r>=1&&r<=9&&(r="0"+r),l>=0&&l<=9&&(l="0"+l),t+"-"+r+"-"+l},pagejump:function(){this.$router.push("/fatable")},beforeupload:function(){if(0===this.form.id)return this.$alert("请先保存再上传文件","提示",{confirmButtonText:"确定",type:"error"}),!1},uploadsuccess1:function(e,t,r){var l=this;this.$api.post("api/Provinceassistancefundsstorages",{id:0,name:e[0].name,url:e[0].url,type:"file1",provinceassistancefundsid:this.form.id},function(e){l.file1=[{name:e.name.slice(14),url:e.url}],l.$message.success("上传成功！")})},uploadsuccess2:function(e,t,r){var l=this;this.$api.post("api/Provinceassistancefundsstorages",{id:0,name:e[0].name,url:e[0].url,type:"file2",provinceassistancefundsid:this.form.id},function(e){l.file2=[{name:e.name.slice(14),url:e.url}],l.$message.success("上传成功！")})},uploadsuccess3:function(e,t,r){var l=this;this.$api.post("api/Provinceassistancefundsstorages",{id:0,name:e[0].name,url:e[0].url,type:"file3",provinceassistancefundsid:this.form.id},function(e){l.file3=[{name:e.name.slice(14),url:e.url}],l.$message.success("上传成功！")})},uploadsuccess4:function(e,t,r){var l=this;this.$api.post("api/Provinceassistancefundsstorages",{id:0,name:e[0].name,url:e[0].url,type:"file4",provinceassistancefundsid:this.form.id},function(e){l.file4=[{name:e.name.slice(14),url:e.url}],l.$message.success("上传成功！")})},uploadsuccess5:function(e,t,r){var l=this;this.$api.post("api/Provinceassistancefundsstorages",{id:0,name:e[0].name,url:e[0].url,type:"file5",provinceassistancefundsid:this.form.id},function(e){l.file5=[{name:e.name.slice(14),url:e.url}],l.$message.success("上传成功！")})},fileremove:function(e){var t=this;this.$api.get("api/Provinceassistancefundsstorages?filter="+encodeURI('{"where":{"url":{"like":"%'+e.url+'%"}}}'),null,function(e){0!==e.length?(t.$api.delete("api/Provinceassistancefundsstorages/"+e[0].id,null,function(e){}),t.$message.success("删除成功")):t.$alert("文件不存在,\n 可能原因：文件未上传成功","提示",{confirmButtonText:"确定"})})}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),e._v(" "),r("div",{staticClass:"container"},[r("div",{staticStyle:{"text-align":"right"}},[r("el-button",{on:{click:e.pagejump}},[e._v("草稿箱")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1),r("br"),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"180px","label-position":"left",rules:e.rules}},[r("el-row",{attrs:{gutter:40}},[r("el-col",{attrs:{span:12,align:"left"}},[r("el-form-item",{attrs:{label:"项目名称",prop:"projectname"}},[r("el-input",{model:{value:e.form.projectname,callback:function(t){e.$set(e.form,"projectname",t)},expression:"form.projectname"}}),e._v(" "),r("p",{staticStyle:{color:"#f02d2d","font-size":"12px"}},[e._v("注：“国家、省、市立项名称+区级奖补”组成以上所要填报的项目名称")])],1),e._v(" "),r("el-form-item",{attrs:{label:"企业名称",prop:"projectname"}},[r("el-input",{model:{value:e.form.companyname,callback:function(t){e.$set(e.form,"companyname",t)},expression:"form.companyname"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"单位类别",prop:"companytype_t"}},[r("el-select",{attrs:{placeholder:"请选择单位类别"},model:{value:e.form.companytype_t,callback:function(t){e.$set(e.form,"companytype_t",t)},expression:"form.companytype_t"}},[r("el-option",{attrs:{label:"科研机构",value:"科研机构"}}),e._v(" "),r("el-option",{attrs:{label:"高等院校",value:"高等院校"}}),e._v(" "),r("el-option",{attrs:{label:"国有企业",value:"国有企业"}}),e._v(" "),r("el-option",{attrs:{label:"民营企业",value:"民营企业"}}),e._v(" "),r("el-option",{attrs:{label:"股份制企业",value:"股份制企业"}}),e._v(" "),r("el-option",{attrs:{label:"国家行政机关",value:"国家行政机关"}}),e._v(" "),r("el-option",{attrs:{label:"其他事业单位",value:"其他事业单位"}}),e._v(" "),r("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),e._v(" "),"其他"===e.form.companytype_t?r("el-form-item",{attrs:{prop:"companytype_tt"}},[r("el-input",{model:{value:e.form.companytype_tt,callback:function(t){e.$set(e.form,"companytype_tt",t)},expression:"form.companytype_tt"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"行业类别",prop:"industrytype"}},[r("el-select",{attrs:{placeholder:"请选择行业类别"},model:{value:e.form.industrytype,callback:function(t){e.$set(e.form,"industrytype",t)},expression:"form.industrytype"}},[r("el-option",{key:"industry1",attrs:{label:"农、林、牧、渔业",value:"农、林、牧、渔业"}}),e._v(" "),r("el-option",{key:"industry2",attrs:{label:"制造业",value:"制造业"}}),e._v(" "),r("el-option",{key:"industry3",attrs:{label:"电力、热力、燃气及水生产和供应业",value:"电力、热力、燃气及水生产和供应业"}}),e._v(" "),r("el-option",{key:"industry4",attrs:{label:"建筑业",value:"建筑业"}}),e._v(" "),r("el-option",{key:"industry5",attrs:{label:"批发和零售业",value:"批发和零售业"}}),e._v(" "),r("el-option",{key:"industry6",attrs:{label:"交通运输、仓储和邮政业",value:"交通运输、仓储和邮政业"}}),e._v(" "),r("el-option",{key:"industry7",attrs:{label:"住宿和餐饮业",value:"住宿和餐饮业"}}),e._v(" "),r("el-option",{key:"industry8",attrs:{label:"信息传输、软件和信息技术服务业",value:"信息传输、软件和信息技术服务业"}}),e._v(" "),r("el-option",{key:"industry9",attrs:{label:"金融业",value:"金融业"}}),e._v(" "),r("el-option",{key:"industry10",attrs:{label:"房地产业",value:"房地产业"}}),e._v(" "),r("el-option",{key:"industry11",attrs:{label:"租赁和商务服务业",value:"租赁和商务服务业"}}),e._v(" "),r("el-option",{key:"industry12",attrs:{label:"科学研究和技术服务业",value:"科学研究和技术服务业"}}),e._v(" "),r("el-option",{key:"industry13",attrs:{label:"水利、环境和公共设施管理业",value:"水利、环境和公共设施管理业"}}),e._v(" "),r("el-option",{key:"industry14",attrs:{label:"居民服务、修理和其他服务业",value:"居民服务、修理和其他服务业"}}),e._v(" "),r("el-option",{key:"industry15",attrs:{label:"教育",value:"教育"}}),e._v(" "),r("el-option",{key:"industry16",attrs:{label:"文化、体育和娱乐业",value:"文化、体育和娱乐业"}}),e._v(" "),r("el-option",{key:"industry17",attrs:{label:"公共管理、社会保障和社会组织",value:"公共管理、社会保障和社会组织"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"项目类别",prop:"projecttype"}},[r("el-select",{attrs:{placeholder:"请选择项目类别"},model:{value:e.form.projecttype,callback:function(t){e.$set(e.form,"projecttype",t)},expression:"form.projecttype"}},[r("el-option",{attrs:{label:"支持科技创新平台建设",value:"支持科技创新平台建设"}}),e._v(" "),r("el-option",{attrs:{label:"支持创业创新综合服务平台建设",value:"支持创业创新综合服务平台建设"}}),e._v(" "),r("el-option",{attrs:{label:"支持科技服务业发展",value:"支持科技服务业发展"}}),e._v(" "),r("el-option",{attrs:{label:"促进高新技术企业发展",value:"促进高新技术企业发展"}}),e._v(" "),r("el-option",{attrs:{label:"大力发展信息产业",value:"大力发展信息产业"}}),e._v(" "),r("el-option",{attrs:{label:"支持中小微企业上市融资",value:"支持中小微企业上市融资"}}),e._v(" "),r("el-option",{attrs:{label:"鼓励企业加大研发投入",value:"鼓励企业加大研发投入"}}),e._v(" "),r("el-option",{attrs:{label:"鼓励企业实施技术改造",value:"鼓励企业实施技术改造"}}),e._v(" "),r("el-option",{attrs:{label:"加大科技计划项目扶持力度",value:"加大科技计划项目扶持力度"}}),e._v(" "),r("el-option",{attrs:{label:"鼓励企业创新发明",value:"鼓励企业创新发明"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"项目获得的国家级补助资金（万元）",prop:"nationfunds"}},[r("el-input",{model:{value:e.form.nationfunds,callback:function(t){e.$set(e.form,"nationfunds",e._n(t))},expression:"form.nationfunds"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"项目获得的省级补助资金（万元）",prop:"provincefunds"}},[r("el-input",{model:{value:e.form.provincefunds,callback:function(t){e.$set(e.form,"provincefunds",e._n(t))},expression:"form.provincefunds"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"项目获得的市级补助资金（万元）",prop:"cityfunds"}},[r("el-input",{model:{value:e.form.cityfunds,callback:function(t){e.$set(e.form,"cityfunds",e._n(t))},expression:"form.cityfunds"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"项目申报区级补助资金（万元）",prop:"districtfunds"}},[r("el-input",{model:{value:e.form.districtfunds,callback:function(t){e.$set(e.form,"districtfunds",e._n(t))},expression:"form.districtfunds"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"上年度营业收入（万元）",prop:"lastyearincome"}},[r("el-input",{model:{value:e.form.lastyearincome,callback:function(t){e.$set(e.form,"lastyearincome",e._n(t))},expression:"form.lastyearincome"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"从业人员(单位：人)",prop:"employedperson"}},[r("el-input",{model:{value:e.form.employedperson,callback:function(t){e.$set(e.form,"employedperson",e._n(t))},expression:"form.employedperson"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"认定时间",prop:"authenticatetime"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"开始日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.form.authenticatetime,callback:function(t){e.$set(e.form,"authenticatetime",t)},expression:"form.authenticatetime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"有效期限",prop:"validity"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"结束日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.form.validity,callback:function(t){e.$set(e.form,"validity",t)},expression:"form.validity"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"证书标号",prop:"certificatelabel"}},[r("el-input",{model:{value:e.form.certificatelabel,callback:function(t){e.$set(e.form,"certificatelabel",t)},expression:"form.certificatelabel"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"项目负责人",prop:"responseperson"}},[r("el-input",{model:{value:e.form.responseperson,callback:function(t){e.$set(e.form,"responseperson",t)},expression:"form.responseperson"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"项目联系人",prop:"contractperson"}},[r("el-input",{model:{value:e.form.contractperson,callback:function(t){e.$set(e.form,"contractperson",t)},expression:"form.contractperson"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"联系座机",prop:"telephone"}},[r("el-input",{model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",e._n(t))},expression:"form.telephone"}},[r("template",{slot:"prepend"},[e._v("0871")])],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"联系手机",prop:"phone"}},[r("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",e._n(t))},expression:"form.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"other"}},[r("el-input",{attrs:{type:"textarea",rows:"2"},model:{value:e.form.other,callback:function(t){e.$set(e.form,"other",t)},expression:"form.other"}})],1),e._v(" "),r("el-upload",{ref:"upload",staticClass:"upload-demo1",attrs:{action:"http://49.4.80.58:3000/api/StorageFiles/upload","on-success":e.uploadsuccess1,"on-remove":e.fileremove,"before-upload":e.beforeupload,"file-list":e.file1,"show-file-list":!0,limit:1,"list-type":"picture-"}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取材料文件")]),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("上传营业执照，只能上传一个文件，格式为jpg、jpeg、png、pdf、rar，且不超过1MB")])],1),r("br"),e._v(" "),r("el-upload",{ref:"upload",staticClass:"upload-demo2",attrs:{action:"http://49.4.80.58:3000/api/StorageFiles/upload","on-success":e.uploadsuccess2,"on-remove":e.fileremove,"before-upload":e.beforeupload,"file-list":e.file2,"show-file-list":!0,limit:1,"list-type":"picture-"}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取材料文件")]),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("上传国家、省、市认定证明材料，只能上传一个文件，格式为xls、xlsx、doc、docx、pdf、rar，且不超过5MB")])],1),r("br"),e._v(" "),r("el-upload",{ref:"upload",staticClass:"upload-demo3",attrs:{action:"http://49.4.80.58:3000/api/StorageFiles/upload","on-success":e.uploadsuccess3,"on-remove":e.fileremove,"before-upload":e.beforeupload,"file-list":e.file3,"show-file-list":!0,limit:1,"list-type":"picture-"}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取材料文件")]),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("上传省市拨款证明材料，只能上传一个文件，格式为xls、xlsx、doc、docx、pdf、rar，且不超过5MB")])],1),r("br"),e._v(" "),r("el-upload",{ref:"upload",staticClass:"upload-demo4",attrs:{action:"http://49.4.80.58:3000/api/StorageFiles/upload","on-success":e.uploadsuccess4,"on-remove":e.fileremove,"before-upload":e.beforeupload,"file-list":e.file4,"show-file-list":!0,limit:1,"list-type":"picture-"}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取材料文件")]),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("上传上年度研发经费投入证明，只能上传一个文件，格式为xls、xlsx、doc、docx、pdf、rar，且不超过5MB")])],1),r("br"),e._v(" "),r("el-upload",{ref:"upload",staticClass:"upload-demo5",attrs:{action:"http://49.4.80.58:3000/api/StorageFiles/upload","on-success":e.uploadsuccess5,"on-remove":e.fileremove,"before-upload":e.beforeupload,"file-list":e.file5,"show-file-list":!0,limit:1,"list-type":"picture-"}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取材料文件")]),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("上传运行情况报告/可行性研究报告，只能上传一个文件，格式为xls、xlsx、doc、docx、pdf、rar，且不超过5MB")])],1),r("br")],1)],1),e._v(" "),r("el-row",{attrs:{align:"center"}},[r("el-col",{attrs:{span:24}},[r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{on:{click:e.save}},[e._v("保存")])],1)])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"crumbs"},[t("span",[this._v("省市项目区级奖补资金项目")])])}]},s=r("VU/8")(l,a,!1,null,null,null);t.default=s.exports}});