webpackJsonp([24],{iub0:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{file1:[],file2:[],file3:[],file4:[],file5:[],form:{id:0,companyid:"",patenttype:"",patentnumber:"",patentname:"",patentee:"",patentaddress:"",phone:"",patenteetype:"",technosphere:"",inventtype:"",applydate:"",impowerdate:"",auditdepartment:"",reportdate:"",status:0},rules:{patenttype:[{required:!0,message:"该项不能为空",trigger:"change"}],patentnumber:[{required:!0,message:"该项不能为空",trigger:"blur"}],patentname:[{required:!0,message:"该项不能为空",trigger:"blur"}],patentee:[{required:!0,message:"该项不能为空",trigger:"blur"}],patentaddress:[{required:!0,message:"该项不能为空",trigger:"blur"}],phone:[{required:!0,message:"该项不能为空",trigger:"blur"},{type:"number",message:"请填写电话号码"}],patenteetype:[{required:!0,message:"该项不能为空",trigger:"change"}],technosphere:[{required:!0,message:"该项不能为空",trigger:"blur"}],inventtype:[{required:!0,message:"该项不能为空",trigger:"blur"}],applydate:[{required:!0,message:"该项不能为空",trigger:"change"}],impowerdate:[{required:!0,message:"该项不能为空",trigger:"change"}],auditdepartment:[{required:!0,message:"该项不能为空",trigger:"change"}]}}},created:function(){this.getdata()},methods:{onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(t){0!==e.file1.length&&0!==e.file2.length&&0!==e.file4.length&&0!==e.file5.length?(e.form.status=1,e.form.opinion="",console.log(e.form.status),e.$api.patch("api/Intellectualpropertyallowances",e.form,function(t){e.$router.push("/pstable"),e.$alert("提交成功","提示",{confirmButtonText:"确定",type:"success"})})):e.$alert("文件未上传或未按规定格式上传","提示",{confirmButtonText:"确定",type:"error"})}else e.$alert("表单未全部填写完成","提示",{confirmButtonText:"确定",type:"error"})})},save:function(){var e=this;this.$api.patch("api/Intellectualpropertyallowances",this.form,function(t){e.form.id=t.id,e.$message.success("保存成功")})},getdata:function(){var e=this;this.form.companyid=localStorage.getItem("companyid"),this.form.reportdate=this.getdate(),this.$route.query.proid&&(this.$api.get("api/Intellectualpropertyallowancestorages?filter="+encodeURI('{"where":{"and":[{"intellectualpropertyallowanceid":'+this.$route.query.proid+"}]}}"),null,function(t){if(0!==t.length)for(var l in t)switch(t[l].type){case"file1":e.file1=[{name:t[l].name.slice(14),url:t[l].url}];break;case"file2":e.file2=[{name:t[l].name.slice(14),url:t[l].url}];break;case"file3":e.file3=[{name:t[l].name.slice(14),url:t[l].url}];break;case"file4":e.file4=[{name:t[l].name.slice(14),url:t[l].url}];break;case"file5":e.file5=[{name:t[l].name.slice(14),url:t[l].url}];break;default:console.log("什么也不是")}}),this.$api.get("api/Intellectualpropertyallowances/"+this.$route.query.proid,null,function(t){e.form=t,t.opinion&&e.$notify({title:"修改信息",message:t.opinion,duration:0,type:"error",position:"top-left"})}))},getdate:function(){var e=new Date,t=e.getFullYear(),l=e.getMonth()+1,a=e.getDate();return l>=1&&l<=9&&(l="0"+l),a>=0&&a<=9&&(a="0"+a),t+"-"+l+"-"+a},pagejump:function(){this.$router.push("/pstable")},beforeupload:function(){if(0===this.form.id)return this.$alert("请先保存再上传文件","提示",{confirmButtonText:"确定",type:"error"}),!1},uploadsuccess1:function(e,t,l){var a=this;this.$api.post("api/Intellectualpropertyallowancestorages",{id:0,name:e[0].name,url:e[0].url,type:"file1",intellectualpropertyallowanceid:this.form.id},function(e){a.file1=[{name:e.name.slice(14),url:e.url}],a.$message.success("上传成功！")})},uploadsuccess2:function(e,t,l){var a=this;this.$api.post("api/Intellectualpropertyallowancestorages",{id:0,name:e[0].name,url:e[0].url,type:"file2",intellectualpropertyallowanceid:this.form.id},function(e){a.file2=[{name:e.name.slice(14),url:e.url}],a.$message.success("上传成功！")})},uploadsuccess3:function(e,t,l){var a=this;this.$api.post("api/Intellectualpropertyallowancestorages",{id:0,name:e[0].name,url:e[0].url,type:"file3",intellectualpropertyallowanceid:this.form.id},function(e){a.file3=[{name:e.name.slice(14),url:e.url}],a.$message.success("上传成功！")})},uploadsuccess4:function(e,t,l){var a=this;this.$api.post("api/Intellectualpropertyallowancestorages",{id:0,name:e[0].name,url:e[0].url,type:"file4",intellectualpropertyallowanceid:this.form.id},function(e){a.file4=[{name:e.name.slice(14),url:e.url}],a.$message.success("上传成功！")})},uploadsuccess5:function(e,t,l){var a=this;this.$api.post("api/Intellectualpropertyallowancestorages",{id:0,name:e[0].name,url:e[0].url,type:"file5",intellectualpropertyallowanceid:this.form.id},function(e){a.file5=[{name:e.name.slice(14),url:e.url}],a.$message.success("上传成功！")})},fileremove:function(e){var t=this;this.$api.get("api/Intellectualpropertyallowancestorages?filter="+encodeURI('{"where":{"url":{"like":"%'+e.url+'%"}}}'),null,function(e){0!==e.length?(t.$api.delete("api/Intellectualpropertyallowancestorages/"+e[0].id,null,function(e){}),t.$message.success("删除成功")):t.$alert("文件不存在,\n 可能原因：文件未上传成功","提示",{confirmButtonText:"确定"})})}}},r={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[e._m(0),e._v(" "),l("div",{staticClass:"container"},[l("div",{staticStyle:{"text-align":"right"}},[l("el-button",{on:{click:e.pagejump}},[e._v("草稿箱")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1),e._v(" "),l("el-form",{ref:"form",attrs:{model:e.form,mar:"","label-width":"120px","label-position":"left",rules:e.rules}},[l("el-row",{attrs:{gutter:40}},[l("el-col",{attrs:{md:12}},[l("el-form-item",{attrs:{label:"国内或国外专利",prop:"patenttype"}},[l("el-radio",{attrs:{label:"国内专利"},model:{value:e.form.patenttype,callback:function(t){e.$set(e.form,"patenttype",t)},expression:"form.patenttype"}}),e._v(" "),l("el-radio",{attrs:{label:"国外专利"},model:{value:e.form.patenttype,callback:function(t){e.$set(e.form,"patenttype",t)},expression:"form.patenttype"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"专利号",prop:"patentnumber"}},[l("el-input",{attrs:{type:"text",required:"true"},model:{value:e.form.patentnumber,callback:function(t){e.$set(e.form,"patentnumber",t)},expression:"form.patentnumber"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"专利名称",prop:"patentname"}},[l("el-input",{attrs:{type:"text"},model:{value:e.form.patentname,callback:function(t){e.$set(e.form,"patentname",t)},expression:"form.patentname"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"专利权人",prop:"patentee"}},[l("el-input",{attrs:{type:"text"},model:{value:e.form.patentee,callback:function(t){e.$set(e.form,"patentee",t)},expression:"form.patentee"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"专利权人地址",prop:"patentaddress"}},[l("el-input",{attrs:{type:"text"},model:{value:e.form.patentaddress,callback:function(t){e.$set(e.form,"patentaddress",t)},expression:"form.patentaddress"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[l("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",e._n(t))},expression:"form.phone"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"专利权人类型",prop:"patenteetype"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.patenteetype,callback:function(t){e.$set(e.form,"patenteetype",t)},expression:"form.patenteetype"}},[l("el-option",{attrs:{label:"个人",value:"个人"}}),e._v(" "),l("el-option",{attrs:{label:"企业",value:"企业"}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"技术领域",prop:"technosphere"}},[l("el-input",{attrs:{type:"text"},model:{value:e.form.technosphere,callback:function(t){e.$set(e.form,"technosphere",t)},expression:"form.technosphere"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"发明类型",prop:"inventtype"}},[l("el-input",{attrs:{type:"text"},model:{value:e.form.inventtype,callback:function(t){e.$set(e.form,"inventtype",t)},expression:"form.inventtype"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"申请日",prop:"applydate"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.form.applydate,callback:function(t){e.$set(e.form,"applydate",t)},expression:"form.applydate"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"授权公告日",prop:"impowerdate"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.form.impowerdate,callback:function(t){e.$set(e.form,"impowerdate",t)},expression:"form.impowerdate"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"审核单位",prop:"auditdepartment"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.auditdepartment,callback:function(t){e.$set(e.form,"auditdepartment",t)},expression:"form.auditdepartment"}},[l("el-option",{attrs:{label:"度假区中小企业服务中心",value:"度假区中小企业服务中心"}})],1)],1)],1),e._v(" "),l("el-col",{attrs:{md:12}},[l("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"http://49.4.80.58:3000/api/StorageFiles/upload","show-file-list":!0,"on-success":e.uploadsuccess1,"on-remove":e.fileremove,"before-upload":e.beforeupload,"file-list":e.file1,limit:1,"list-type":"picture-"}},[l("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取材料文件")]),e._v(" "),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("上传全套专利证书,只能上传一个文件，格式为jpeg、jpeg、png、pdf、rar，不超过1MB")])],1),l("br"),e._v(" "),l("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"http://49.4.80.58:3000/api/StorageFiles/upload","show-file-list":!0,"on-success":e.uploadsuccess2,"on-remove":e.fileremove,"before-upload":e.beforeupload,"file-list":e.file2,limit:1,"list-type":"picture-"}},[l("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取材料文件")]),e._v(" "),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("上传专利授权费和历年专利年费缴费发票,只能上传一个文件，格式为jpeg、jpeg、png、pdf、rar，不超过1MB")])],1),l("br"),e._v(" "),l("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"http://49.4.80.58:3000/api/StorageFiles/upload","show-file-list":!0,"on-success":e.uploadsuccess3,"on-remove":e.fileremove,"before-upload":e.beforeupload,"file-list":e.file3,limit:1,"list-type":"picture-"}},[l("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取材料文件")]),e._v(" "),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("专利权人身份证明,只能上传一个文件，格式为jpeg、jpeg、png、pdf、rar，不超过1MB")])],1),l("br"),e._v(" "),l("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"http://49.4.80.58:3000/api/StorageFiles/upload","show-file-list":!0,"on-success":e.uploadsuccess4,"on-remove":e.fileremove,"before-upload":e.beforeupload,"file-list":e.file4,limit:1,"list-type":"picture-"}},[l("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取材料文件")]),e._v(" "),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("专利资助授权委托书,只能上传一个文件，格式为jpeg、jpeg、png、pdf、rar，不超过1MB")])],1),l("br"),e._v(" "),l("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"http://49.4.80.58:3000/api/StorageFiles/upload","show-file-list":!0,"on-success":e.uploadsuccess5,"on-remove":e.fileremove,"before-upload":e.beforeupload,"file-list":e.file5,limit:1,"list-type":"picture-"}},[l("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取材料文件")]),e._v(" "),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("申报材料真实性承诺书,只能上传一个文件，格式为doc、docx、pdf、rar，不超过1MB")])],1),l("br")],1)],1),e._v(" "),l("div",{attrs:{align:"center"}},[l("el-button",{on:{click:e.save}},[e._v("保存")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"crumbs"},[t("span",[this._v("知识产权补助")])])}]},i=l("VU/8")(a,r,!1,null,null,null);t.default=i.exports}});